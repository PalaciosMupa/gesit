
  
<mat-toolbar>
  <button mat-icon-button *ngIf="sidenav.mode === 'over'" (click)="sidenav.toggle()">
    <mat-icon *ngIf="!sidenav.opened">
      menu
    </mat-icon>
    <mat-icon *ngIf="sidenav.opened">
      close
    </mat-icon>

  </button>

 <a
    [routerLink]="'/'"
    mat-icon-button
    class="example-icon"
    arial-label="Example icon-button with menu icon"
  >
    <mat-icon>print</mat-icon>
  </a>

    <span>Sistema de Impresoras Grupo ESIT</span>
  <span class="example-spacer"></span>

  <a *ngIf="!autenticado"
    [routerLink]="'/login'"  
    mat-icon-button
    class = "example-icon favorite-icon"
    aria-label = "Example icon-button with heart icon"
  >
    Iniciar sesión
  </a>

   <button mat-raised-button
        matTooltip="Cerrar Sesión"
        aria-label="Button that displays a tooltip when focused or hovered over"
   mat-icon-button *ngIf="autenticado" (click)="logout()">
   
 <mat-icon>exit_to_app</mat-icon>
  </button>

 

 
  
  </mat-toolbar>

<mat-sidenav-container>
<mat-sidenav #sidenav="matSidenav">

   <img src="../../../assets/img/banner/Grupo_ESIT2.png" width = "100" height = "70">
  <mat-divider> </mat-divider>
  <button mat-button class="menu-button" type="button" [routerLink]="['/home']">
    <mat-icon>home</mat-icon>  
    <span>Inicio</span>
  </button>

  <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/listCuen']">
   <mat-icon>face</mat-icon> 
    <span> Clientes</span>
  </button>

  <button *ngIf="authService.hasRole('ROLE_USER')" mat-button class="menu-button"type="button" [routerLink]="['/formato']">
    <mat-icon>folder_open</mat-icon> 
    <span> Formatos</span>
  </button>

  <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/formato']">
    <mat-icon>folder_open</mat-icon> 
    <span> Formatos</span>
  </button>

  <mat-divider> </mat-divider>

  <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/listInvent']">
    <mat-icon>money</mat-icon>  
    <span>Inventario</span>
  </button>

   <button *ngIf="authService.hasRole('ROLE_TECNICO')" mat-button class="menu-button"type="button" [routerLink]="['/listRepuesto']">
      <mat-icon>autorenew</mat-icon>
      <span>Repuestos</span>
    </button>

      <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/listRepuesto']">
      <mat-icon>autorenew</mat-icon>
      <span>Repuestos</span>
    </button>

  <button *ngIf="authService.hasRole('ROLE_TECNICO')" mat-button class="menu-button" type="button" [routerLink]="['/instructivo']">
    <mat-icon>school</mat-icon> 
    <span> Instructivo</span>
  </button>

   <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button" type="button" [routerLink]="['/instructivo']">
    <mat-icon>school</mat-icon> 
    <span> Instructivo</span>
  </button>



  <button *ngIf="authService.hasRole('ROLE_USER')" mat-button class="menu-button"type="button" [routerLink]="['/listticket']">
   <mat-icon>how_to_vote</mat-icon> 
    <span> Tickets</span>
  </button>

   <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/listticket']">
   <mat-icon>how_to_vote</mat-icon> 
    <span> Tickets</span>
  </button>

    <button *ngIf="authService.hasRole('ROLE_TECNICO')" mat-button class="menu-button"type="button" [routerLink]="['/ticket2']">
   <mat-icon>how_to_vote</mat-icon> 
    <span> Tickets</span>
  </button>




  <mat-divider> </mat-divider>


  <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/catalogos']">
   <mat-icon>settings</mat-icon> 
    <span> Catálogos</span>
  </button>

   <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/signup']">
   <mat-icon>how_to_reg</mat-icon> 
    <span> Registro</span>
  </button>

  <button *ngIf="authService.hasRole('ROLE_ADMIN')" mat-button class="menu-button"type="button" [routerLink]="['/listRol']">
   <mat-icon>account_box</mat-icon> 
    <span>Roles</span>
  </button>

</mat-sidenav>

<mat-sidenav-content>

   
<main class="col-md-9 col-lg-12 px-md-4">

<div *ngIf="mantos" class="col-xl-12 col-lg-8 item-wr">

  <div class="card border-primary mb-3">
    <div class="card-header" style="color:red">Equipos que requieren de Mantenimiento</div>
    <div class="card-body text-primary">
     

       <table 
          class="table table-bordered table-striped table-sm table-responsive">
        <thead>
          <tr>
            <th>Modelo</th>
            <th>Serie</th>
            


          </tr>
        </thead>
        <tbody>
          <tr  *ngFor="let ma of Manto">

          <td>{{ ma.equipo }}</td>
            <td>{{ ma.serie_equipo }}</td>
            
         
          </tr>
        </tbody>
      </table>
  

  </div>
  </div>
  </div>



  <div class="col-xl-12 col-lg-8 item-wr">

  <div class="card border-primary mb-3">
    <div class="card-header">Cambio de Consumibles </div>
    <div class="card-body text-primary">
      <h3 class="card-title">Registro Cambio de consumibles</h3>
      <div class="my-2 text-left button-wrapper">
        <button class="btn btn-rounded btn-primary btn-space" type="button" [routerLink]="['/formRespuesto']">
          Efectuar cambio de consumible 
        </button>

           <button class="btn btn-rounded btn-danger btn-space" type="button" [routerLink]="['/ticket2']">
                    Tickets 
        </button>
         
      </div>

      
      
     


      <table class="table table-bordered table-striped table-sm table-responsive">
        <thead>

            <tr>  
            
            <td colspan= "1" ><b>

           <input style="width:95px;"
            class="form-control" 
            type="text" 
            name="Repuesto"
            [(ngModel)]="Repues"
            (ngModelChange)="Search()" 
             >

          </b> </td>  

           <td colspan= "1" ><b>

           <input style="width:95px;"
            class="form-control" 
            type="text" 
            name="RepuestoSubarea"
            [(ngModel)]="RepuesSubarea"
            (ngModelChange)="SearchSub()" 
             >

          </b> </td>
            <td colspan= "1" ><b>

           <input style="width:100px;"
            class="form-control" 
            type="text" 
            name="RepuestoEquipo"
            [(ngModel)]="RepuesEquipo"
            (ngModelChange)="SearchEquipo()"  
            >

          </b> </td> 

           <td colspan= "1" ><b>

           <input style="width:85px;"
            class="form-control" 
            type="text" 
            name="RepuestoSerie" 
            [(ngModel)]="RepuesSerie"
            (ngModelChange)="SearchSerie()" 
            >

          </b> </td>

          <td colspan= "1" ><b>  </b> </td> 

           <td colspan= "1" ><b>  </b> </td> 

           <td colspan= "1" ><b>  </b> </td>

           <td colspan= "1" ><b> 
           


            </b> </td>  



          <td colspan= "1" ><b>

         <mat-form-field appearance="fill">
          <mat-label>Ingrese el rango</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
            <input matStartDate formControlName="start" 
            (ngModelChange)="SearchFecha()"
            placeholder="Inicio">
            <input matEndDate formControlName="end" 
            (ngModelChange)="SearchFecha()"
            placeholder="Fin">
          </mat-date-range-input>
          <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>

          <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">Invalid start date</mat-error>
          <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Invalid end date</mat-error>
        </mat-form-field>

          </b> </td>        
           
          </tr>  
          <tr>
            <th>Área</th>
            <th>Subarea</th>
            
              
              <th>Aquipo</th>
            <th>No. Serie</th>
            <th>Toner</th>
           
            <th>Fusor</th>
            <th>Unidad</th>
            <th>Refacción</th>
            <th>Fecha</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let repuesto of repuestos" >

          <td>{{ repuesto.areas.area }}</td>
            <td>{{ repuesto.subarea.subarea }}</td>
            <td>{{ repuesto.equipo }}</td>
            <td>{{ repuesto.serie_equipo }}</td>
            <td>{{ repuesto.toner }}</td>
          
            <td>{{ repuesto.fusor }}</td>
            <td>{{ repuesto.unidad }}</td>
            <td>{{ repuesto.serie_refaccion }}</td>
          
            <td>{{ repuesto.fechaCambio | date:'mediumDate'}}</td>
             
            
           
           
          </tr>
          <tr>  
            <td colspan= "3" ></td>  
            <td colspan= "1" ><b>Total:</b> </td>  
            <td colspan= "1" ><b>{{suma1}}</b> </td> 
            <td colspan= "1" ><b>{{suma3}}</b> </td> 
            <td colspan= "1" ><b>{{suma2}}</b> </td>  
          </tr>  
        </tbody>
      </table>

    </div>
  </div>
  </div>




</main>


      </mat-sidenav-content>
    </mat-sidenav-container>